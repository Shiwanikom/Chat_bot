c
Stripe::Customer.create({name: name , email: email , phone: phone_number })
c
@user.update(payment_status: true) if @payment.status == true
n
c
n
c
@payment
n
c
@charge['amount']
@charge['ammount']
@charge
n
c
n
c
Stripe::Charge.create( amount: amount*100, currency: 'usd', source: card_id, customer: stripe_customer_id, description: "Account $ #{amount} Charge" )
n
c
n
token
n
c
Stripe::Customer.create_source( stripe_customer, {source: token.id} )
c
Stripe::Token.create({ card: { number: "4242424242424242", exp_month: 5 , exp_year: 2024, cvc: "314", } })
n
v
c
Payment.create_stripe_customer_card(@user.stripe_id)
c
@user.strip_id
@user
Payment.create_stripe_customer_card(@user.strip_id)
c
self.stripe_id
n
c
Stripe::Token.create( card={ "number": params[:card_number], "exp_month": params[:card_exp_month], "exp_year": params[:card_exp_year], "cvc": params[:card_cvv] }, )
params
params[:card_number]
c
stripe_token(card_params)
n
c
params
params[:token]
token
c
n
c
v
c
params
c
n
c
@user.stripe_token(card_params)
stripe_token(card_params)
n
c
params
n
c
params
c
params
Stripe::Token.create( { card: { number: "4242424242424242", exp_month: 12, exp_year: 2024, cvc: "314" } } )
  }
    }
      cvc: "314"
      exp_year: 2024,
      exp_month: 12,
      number: "4242424242424242",
    card: {
  {
 Stripe::Token.create(
Stripe::Token.create( card={ "number": "4242424242424242", "exp_month": 12, "exp_year": 2024, "cvc": 314 }, )
c
n
c
stripe_customer
n
c
n
c
@user.save!
n
User.new(user_params)
user_params
c
Plan.new(ammount: params[:ammount])
c
n
self
self.stripe_id = stripe_customer.id
n
c
 stripe_customer.index
n
c
v
Stripe::Customer.create({name: name , email: email , phone: phone_number})
n
c
n
c
user_params
c
user_params
params
c
n
c
n
